<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>s3sf</title>

<style>
body {
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 20px;
  background: #f4f6f8;
  display: flex;
  flex-direction: column;
  align-items: center;
}

textarea {
  width: 320px;
  height: 120px;
  padding: 10px;
  border-radius: 8px;
  border: 1px solid #ccc;
  font-size: 14px;
  resize: none;
}

button {
  margin-top: 10px;
  padding: 10px 20px;
  font-size: 16px;
  border: none;
  border-radius: 10px;
  background: #2ecc71;
  color: white;
  cursor: pointer;
}

button:hover {
  background: #27ae60;
}

.classroom {
  margin-top: 30px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.row {
  display: flex;
  gap: 14px;
  justify-content: center;
}

.block {
  display: grid;
  gap: 6px;
}

.block-2 { grid-template-columns: repeat(2, 50px); }
.block-3 { grid-template-columns: repeat(3, 50px); }

.seat {
  width: 50px;
  height: 50px;
  background: #dfe6e9;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  text-align: center;
  padding: 3px;
}

.filled {
  background: #e74c3c;
  color: white;
}
</style>
</head>

<body>

<h1>macee attackkk!</h1>

<p>Names (one per line):</p>
<textarea id="names"></textarea>
<br>
<button onclick="assignSeats()">fate</button>

<div class="classroom" id="classroom"></div>

<script>
const classroomDiv = document.getElementById("classroom");
const layout = [2,3,3,2];
let seatElements = [];

// Build classroom layout
for (let r = 0; r < 5; r++) {
  const row = document.createElement("div");
  row.className = "row";

  layout.forEach(size => {
    const block = document.createElement("div");
    block.className = "block block-" + size;

    for (let i = 0; i < size; i++) {
      const seat = document.createElement("div");
      seat.className = "seat";
      block.appendChild(seat);
      seatElements.push(seat);
    }

    row.appendChild(block);
  });

  classroomDiv.appendChild(row);
}

// Shuffle function
function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

function assignSeats() {

  const input = document.getElementById("names").value.trim();
  if (!input) {
    alert("Enter student names first.");
    return;
  }

  let names = input.split("\n").map(n => n.trim()).filter(n => n);

  if (names.length < 29) {
    alert("Need at least 29 students.");
    return;
  }

  if (names.length > seatElements.length) {
    alert("Too many students!");
    return;
  }

  // Get line 18 and 29 (index 17 & 28)
  const studentA = names[17];
  const studentB = names[28];

  // Remove them (remove higher index first)
  names.splice(28, 1);
  names.splice(17, 1);

  // Clear seats
  seatElements.forEach(seat => {
    seat.textContent = "";
    seat.classList.remove("filled");
  });

  // Find adjacent seat pairs (same block only)
  let adjacentPairs = [];

  for (let i = 0; i < seatElements.length - 1; i++) {
    if (seatElements[i].parentElement === seatElements[i+1].parentElement) {
      adjacentPairs.push([i, i+1]);
    }
  }

  // Pick random adjacent pair
  const randomPair = adjacentPairs[Math.floor(Math.random() * adjacentPairs.length)];

  // Place fixed pair
  seatElements[randomPair[0]].textContent = studentA;
  seatElements[randomPair[1]].textContent = studentB;
  seatElements[randomPair[0]].classList.add("filled");
  seatElements[randomPair[1]].classList.add("filled");

  // Remaining seat indexes
  let remainingIndexes = seatElements
    .map((_, i) => i)
    .filter(i => i !== randomPair[0] && i !== randomPair[1]);

  shuffle(remainingIndexes);

  // Place remaining students
  names.forEach((name, index) => {
    const seatIndex = remainingIndexes[index];
    seatElements[seatIndex].textContent = name;
    seatElements[seatIndex].classList.add("filled");
  });
}
</script>

</body>
</html>
